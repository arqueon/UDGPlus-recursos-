<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checklist de Seguridad Digital Esencial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .checklist-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 0.5rem;
            transition: all 0.2s ease-in-out;
        }
        .checklist-item:hover {
            background-color: rgba(255, 255, 255, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        .checklist-item input[type="checkbox"] {
            margin-top: 0.25rem;
            flex-shrink: 0;
            height: 1.25rem;
            width: 1.25rem;
            border-radius: 0.25rem;
            cursor: pointer;
        }
        .checklist-item label {
            margin-left: 0.75rem;
            cursor: pointer;
        }
        .checklist-item label strong {
            font-weight: 600;
        }
        /* Colores para los checkboxes al ser seleccionados */
        .accent-blue-600 { accent-color: #2563eb; }
        .accent-green-600 { accent-color: #16a34a; }
        .accent-amber-600 { accent-color: #d97706; }
        .accent-indigo-600 { accent-color: #4f46e5; }
        .accent-rose-600 { accent-color: #e11d48; }
        
        /* Estilos para el Modal */
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: all 0.3s ease;
        }
        
        /* Estilos para el spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-100">

    <div class="max-w-4xl mx-auto my-10 p-6 sm:p-8 bg-white rounded-xl shadow-2xl">
        <header class="text-center mb-10 border-b-2 border-slate-200 pb-6">
            <h1 class="text-4xl font-bold text-slate-900">Auditoría Rápida de tu Fortaleza Digital</h1>
            <p class="text-slate-600 mt-3 text-lg">Usa esta lista para evaluar y fortalecer tu seguridad en línea. Marca cada acción completada.</p>
        </header>

        <main class="space-y-8">
            <!-- SECCIÓN 1: GESTIÓN DE CUENTAS Y CONTRASEÑAS -->
            <section class="p-6 rounded-xl bg-blue-50 border border-blue-200">
                <h2 class="text-2xl font-semibold mb-4 text-blue-800">1. Gestión de Cuentas y Contraseñas</h2>
                <div class="checklist-item">
                    <input type="checkbox" id="item1" class="border-blue-300 accent-blue-600">
                    <label for="item1" class="text-blue-900"><strong>Gestor de Contraseñas:</strong> ¿Utilizo un gestor (como Bitwarden, 1Password) para generar y guardar contraseñas únicas y fuertes para cada servicio?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="item2" class="border-blue-300 accent-blue-600">
                    <label for="item2" class="text-blue-900"><strong>Autenticación Multifactor (MFA):</strong> ¿He activado la MFA en mis cuentas más importantes (correo, redes sociales, bancos)?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="item3" class="border-blue-300 accent-blue-600">
                    <label for="item3" class="text-blue-900"><strong>Revisión de Privacidad:</strong> ¿He revisado la configuración de privacidad de mis perfiles sociales en los últimos 6 meses?</label>
                </div>
            </section>

            <!-- SECCIÓN 2: PROTECCIÓN DE DISPOSITIVOS -->
            <section class="p-6 rounded-xl bg-green-50 border border-green-200">
                <h2 class="text-2xl font-semibold mb-4 text-green-800">2. Protección de Dispositivos</h2>
                <div class="checklist-item">
                    <input type="checkbox" id="item4" class="border-green-300 accent-green-600">
                    <label for="item4" class="text-green-900"><strong>Actualizaciones Automáticas:</strong> ¿Mi sistema operativo (Windows, macOS, Android, iOS, Linux) y apps están configurados para actualizarse solos?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="item5" class="border-green-300 accent-green-600">
                    <label for="item5" class="text-green-900"><strong>Software de Protección:</strong> En Windows/macOS, ¿tengo un antivirus activo? En Linux, ¿tengo un firewall configurado (ej. UFW)?</label>
                </div>
                 <div class="checklist-item">
                    <input type="checkbox" id="item6" class="border-green-300 accent-green-600">
                    <label for="item6" class="text-green-900"><strong>Bloqueo de Acceso:</strong> ¿Todos mis dispositivos requieren un PIN, contraseña, huella dactilar o rostro para desbloquearse?</label>
                </div>
            </section>

            <!-- SECCIÓN 3: HÁBITOS DE NAVEGACIÓN Y COMUNICACIÓN -->
            <section class="p-6 rounded-xl bg-amber-50 border border-amber-200">
                <h2 class="text-2xl font-semibold mb-4 text-amber-800">3. Hábitos de Navegación y Comunicación</h2>
                <div class="checklist-item">
                    <input type="checkbox" id="item7" class="border-amber-300 accent-amber-600">
                    <label for="item7" class="text-amber-900"><strong>Prudencia con los Enlaces:</strong> ¿Verifico los enlaces antes de hacer clic en correos sospechosos (phishing)?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="item8" class="border-amber-300 accent-amber-600">
                    <label for="item8" class="text-amber-900"><strong>Navegación Segura (HTTPS):</strong> ¿Confirmo que los sitios donde ingreso datos sensibles usan HTTPS (icono de candado)?</label>
                </div>
                 <div class="checklist-item">
                    <input type="checkbox" id="item9" class="border-amber-300 accent-amber-600">
                    <label for="item9" class="text-amber-900"><strong>Descargas Seguras:</strong> ¿Descargo apps solo de tiendas oficiales (App Store, Google Play) o repositorios de confianza (Linux)?</label>
                </div>
            </section>

            <!-- SECCIÓN 4: INTERACCIÓN SEGURA CON IA -->
            <section class="p-6 rounded-xl bg-indigo-50 border border-indigo-200">
                <h2 class="text-2xl font-semibold mb-4 text-indigo-800">4. Interacción Segura con Inteligencia Artificial</h2>
                 <div class="checklist-item">
                    <input type="checkbox" id="item10" class="border-indigo-300 accent-indigo-600">
                    <label for="item10" class="text-indigo-900"><strong>No compartir datos sensibles:</strong> ¿Soy consciente de NUNCA compartir información personal, financiera o secretos comerciales con IAs públicas?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="item11" class="border-indigo-300 accent-indigo-600">
                    <label for="item11" class="text-indigo-900"><strong>Revisar políticas de uso de datos:</strong> Antes de usar una IA, ¿reviso si mis datos se usarán para entrenarla y si puedo negarme?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="item12" class="border-indigo-300 accent-indigo-600">
                    <label for="item12" class="text-indigo-900"><strong>Tratar las respuestas con escepticismo:</strong> ¿Verifico la información crítica que me da una IA con fuentes fiables antes de usarla?</label>
                </div>
            </section>

            <!-- SECCIÓN 5: PRUEBA DE NUEVAS APLICACIONES -->
            <section class="p-6 rounded-xl bg-rose-50 border border-rose-200">
                <h2 class="text-2xl font-semibold mb-4 text-rose-800">5. Prueba de Nuevas Aplicaciones (antes de uso laboral)</h2>
                 <div class="checklist-item">
                    <input type="checkbox" id="item13" class="border-rose-300 accent-rose-600">
                    <label for="item13" class="text-rose-900"><strong>Investigación previa:</strong> Antes de instalar una app para el trabajo, ¿busco reseñas e investigo la reputación del desarrollador?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="item14" class="border-rose-300 accent-rose-600">
                    <label for="item14" class="text-rose-900"><strong>Revisión de permisos:</strong> Al instalar una app, ¿analizo críticamente los permisos que solicita (acceso a contactos, cámara, etc.)?</label>
                </div>
                <div class="checklist-item">
                    <input type="checkbox" id="item15" class="border-rose-300 accent-rose-600">
                    <label for="item15" class="text-rose-900"><strong>Entorno de prueba (Sandbox):</strong> Para software dudoso, ¿considero probarlo en un entorno controlado (máquina virtual) para evitar riesgos?</label>
                </div>
            </section>

            <!-- Botón para análisis con IA -->
            <div class="text-center pt-6">
                <button id="analyzeButton" class="bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-transform transform hover:scale-105">
                    ✨ Analiza mi riesgo con IA
                </button>
            </div>
        </main>
    </div>

    <!-- Modal para mostrar resultados de IA -->
    <div id="aiModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden flex items-center justify-center p-4" style="z-index: 1000;">
        <div class="bg-white rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col modal-content scale-95 opacity-0">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 class="text-2xl font-bold text-slate-800">Análisis de Seguridad Personalizado</h3>
                <button id="closeModalButton" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            </div>
            <div id="modalBody" class="p-6 overflow-y-auto">
                <div id="loader" class="flex justify-center items-center py-8">
                    <div class="loader"></div>
                </div>
                <div id="aiResult" class="prose max-w-none text-slate-700"></div>
            </div>
        </div>
    </div>
    
    <script type="module">
        const analyzeButton = document.getElementById('analyzeButton');
        const aiModal = document.getElementById('aiModal');
        const closeModalButton = document.getElementById('closeModalButton');
        const modalBody = document.getElementById('modalBody');
        const aiResult = document.getElementById('aiResult');
        const loader = document.getElementById('loader');

        // Función para mostrar el modal
        const showModal = () => {
            aiModal.classList.remove('hidden');
            setTimeout(() => {
                aiModal.classList.remove('opacity-0');
                aiModal.querySelector('.modal-content').classList.remove('scale-95', 'opacity-0');
            }, 10);
        };

        // Función para ocultar el modal
        const hideModal = () => {
            aiModal.querySelector('.modal-content').classList.add('scale-95', 'opacity-0');
            aiModal.classList.add('opacity-0');
            setTimeout(() => {
                aiModal.classList.add('hidden');
            }, 300);
        };

        closeModalButton.addEventListener('click', hideModal);
        aiModal.addEventListener('click', (event) => {
            if (event.target === aiModal) {
                hideModal();
            }
        });

        // Función para llamar a la API de Gemini
        async function callGeminiAPI(prompt, retries = 3, delay = 1000) {
            const apiKey = ""; // API key will be injected by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const systemPrompt = "Actúa como un experto en ciberseguridad amigable y didáctico. Tu objetivo es ayudar a un usuario a entender los riesgos de no seguir ciertas prácticas de seguridad digital. Explica cada riesgo de forma clara, directa y sin alarmismo. Proporciona un consejo práctico y accionable para cada punto. Formatea tu respuesta en Markdown, usando encabezados (##) para cada riesgo y listas de viñetas para los consejos.";

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    return candidate.content.parts[0].text;
                } else {
                    throw new Error("Respuesta inválida de la API.");
                }
            } catch (error) {
                console.error("Error al llamar a la API de Gemini:", error);
                if (retries > 0) {
                    console.log(`Reintentando... ${retries} intentos restantes.`);
                    await new Promise(res => setTimeout(res, delay));
                    return callGeminiAPI(prompt, retries - 1, delay * 2); // Exponential backoff
                }
                return "Lo siento, no pude procesar tu solicitud en este momento. Por favor, inténtalo de nuevo más tarde.";
            }
        }
        
        // Función para convertir Markdown simple a HTML
        function simpleMarkdownToHtml(markdown) {
            return markdown
                .replace(/^## (.*$)/gim, '<h2 class="text-xl font-bold text-slate-800 mt-4 mb-2">$1</h2>')
                .replace(/\* (.*$)/gim, '<li class="ml-4 list-disc">$1</li>')
                .replace(/\n/g, '<br>');
        }

        analyzeButton.addEventListener('click', async () => {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const uncheckedItems = [];

            checkboxes.forEach(checkbox => {
                if (!checkbox.checked) {
                    const label = document.querySelector(`label[for="${checkbox.id}"]`);
                    if (label) {
                        uncheckedItems.push(label.querySelector('strong').textContent);
                    }
                }
            });
            
            aiResult.innerHTML = '';
            loader.style.display = 'flex';
            showModal();

            let prompt;
            let responseText;

            if (uncheckedItems.length === 0) {
                responseText = `
                    <h2>¡Felicidades! 🥳</h2>
                    <p class="mt-4">Has completado todos los puntos de la checklist. Tu fortaleza digital está en excelente forma. Sigue manteniendo estos buenos hábitos para navegar de forma segura.</p>
                `;
            } else {
                prompt = `Un usuario no ha marcado los siguientes puntos en una checklist de seguridad: ${uncheckedItems.join(', ')}. Por favor, explica los riesgos asociados a cada uno y cómo solucionarlos.`;
                const rawResponse = await callGeminiAPI(prompt);
                responseText = simpleMarkdownToHtml(rawResponse);
            }
            
            loader.style.display = 'none';
            aiResult.innerHTML = responseText;
        });

    </script>
</body>
</html>

